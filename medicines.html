<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmacia Nucului Batran - Medicamente</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="medicine-styles.css">
    <style>
        .theme-toggle {
            background: none;
            border: 2px solid var(--primary-color);
            color: var(--text-color);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            background: var(--primary-color);
            color: var(--card-color);
        }

        .theme-toggle .icon {
            font-size: 1.2em;
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                transition: none !important;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <h1 style="color: var(--primary-color);">Farmacia Nucului Batran</h1>
            <nav class="nav-links">
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span class="icon" id="themeIcon">ğŸŒ™</span>
                    <span id="themeText">Mod Ãntunecat</span>
                </button>
                <a href="index.html">AcasÄƒ</a>
                <a href="#" style="position: relative;" class="basket-icon" onclick="showBasket()">
                    ğŸ›’ CoÈ™ <span id="cart-count" style="background: var(--primary-dark); padding: 2px 6px; border-radius: 10px; font-size: 0.8em;">0</span>
                </a>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
        <div class="card" style="margin: 2rem 0;">
            <div class="filters">
                <div class="filter-group">
                    <label class="label">CÄƒutare</label>
                    <input type="text" id="searchInput" placeholder="CautÄƒ medicamente..." oninput="filterProducts()" style="width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); color: var(--text-color);">
                </div>
                <div class="filter-group">
                    <label class="label">Categorie</label>
                    <select id="categoryFilter" onchange="filterProducts()">
                        <option value="all">Toate Categoriile</option>
                        <option value="cold">RÄƒcealÄƒ È™i GripÄƒ</option>
                        <option value="throat">Dureri Ã®n GÃ¢t</option>
                        <option value="cough">Tuse</option>
                        <option value="painkillers">Analgezice</option>
                        <option value="antibiotics">Antibiotice</option>
                        <option value="vitamins">Vitamine</option>
                        <option value="supplements">Suplimente</option>
                        <option value="allergy">Antialergice</option>
                        <option value="heart">Sistem Cardiovascular</option>
                        <option value="digestive">Sistem Digestiv</option>
                        <option value="respiratory">Sistem Respirator</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="label">ReÈ›etÄƒ</label>
                    <select onchange="filterProducts()">
                        <option value="all">Toate Tipurile</option>
                        <option value="yes">NecesitÄƒ ReÈ›etÄƒ</option>
                        <option value="no">FÄƒrÄƒ ReÈ›etÄƒ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="label">Interval PreÈ›: <span id="priceValue">50 Lei</span></label>
                    <input type="range" min="0" max="100" value="50" oninput="updatePriceValue(this.value)">
                </div>
            </div>
        </div>

        <div class="product-grid">
            <!-- Medicamente pentru RÄƒcealÄƒ È™i GripÄƒ - FÄƒrÄƒ ReÈ›etÄƒ -->
            <div class="card product-card">
                <h3>Theraflu Extra Grip</h3>
                <div class="tabs">
                    <button class="tab active" onclick="openTab(event, 'descriptionTheraflu')">Descriere</button>
                    <button class="tab" onclick="openTab(event, 'sideEffectsTheraflu')">Efecte Secundare</button>
                </div>
                <div id="descriptionTheraflu" class="tab-content active">
                    <p>Pulbere pentru soluÈ›ie oralÄƒ. Tratamentul simptomatic al rÄƒcelii È™i gripei.</p>
                    <p>Cantitate Ã®n stoc: 45</p>
                    <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">35.99 Lei</p>
                </div>
                <div id="sideEffectsTheraflu" class="tab-content">
                    <p>Poate cauza: nervozitate, insomnie, ameÈ›eli.</p>
                </div>
                <button onclick="addToCart('Theraflu Extra Grip')">AdaugÄƒ Ã®n CoÈ™</button>
            </div>

            <div class="card product-card">
                <h3>Parasinus</h3>
                <div class="tabs">
                    <button class="tab active" onclick="openTab(event, 'descriptionParasinus')">Descriere</button>
                    <button class="tab" onclick="openTab(event, 'sideEffectsParasinus')">Efecte Secundare</button>
                </div>
                <div id="descriptionParasinus" class="tab-content active">
                    <p>Pentru congestie nazalÄƒ È™i dureri sinusale. 12 comprimate.</p>
                    <p>Cantitate Ã®n stoc: 60</p>
                    <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">28.99 Lei</p>
                </div>
                <div id="sideEffectsParasinus" class="tab-content">
                    <p>Poate cauza: somnolenÈ›Äƒ, uscÄƒciunea gurii.</p>
                </div>
                <button onclick="addToCart('Parasinus')">AdaugÄƒ Ã®n CoÈ™</button>
            </div>

            <!-- Medicamente pentru Durere Ã®n GÃ¢t - FÄƒrÄƒ ReÈ›etÄƒ -->
            <div class="card product-card">
                <h3>Strepsils Intensiv Miere & LÄƒmÃ¢ie</h3>
                <div class="tabs">
                    <button class="tab active" onclick="openTab(event, 'descriptionStrepsils')">Descriere</button>
                    <button class="tab" onclick="openTab(event, 'sideEffectsStrepsils')">Efecte Secundare</button>
                </div>
                <div id="descriptionStrepsils" class="tab-content active">
                    <p>Pastile pentru dureri Ã®n gÃ¢t. 24 pastile.</p>
                    <p>Cantitate Ã®n stoc: 80</p>
                    <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">25.99 Lei</p>
                </div>
                <div id="sideEffectsStrepsils" class="tab-content">
                    <p>Poate cauza: iritaÈ›ie localÄƒ uÈ™oarÄƒ.</p>
                </div>
                <button onclick="addToCart('Strepsils Intensiv')">AdaugÄƒ Ã®n CoÈ™</button>
            </div>

            <!-- Medicamente pentru Tuse - FÄƒrÄƒ ReÈ›etÄƒ -->
            <div class="card product-card">
                <h3>ACC 600mg</h3>
                <div class="tabs">
                    <button class="tab active" onclick="openTab(event, 'descriptionACC')">Descriere</button>
                    <button class="tab" onclick="openTab(event, 'sideEffectsACC')">Efecte Secundare</button>
                </div>
                <div id="descriptionACC" class="tab-content active">
                    <p>Expectorant pentru tuse productivÄƒ. 10 plicuri efervescente.</p>
                    <p>Cantitate Ã®n stoc: 40</p>
                    <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">32.99 Lei</p>
                </div>
                <div id="sideEffectsACC" class="tab-content">
                    <p>Poate cauza: greaÈ›Äƒ, tulburÄƒri digestive.</p>
                </div>
                <button onclick="addToCart('ACC 600')">AdaugÄƒ Ã®n CoÈ™</button>
            </div>

            <!-- Vitamine È™i Suplimente - FÄƒrÄƒ ReÈ›etÄƒ -->
            <div class="card product-card">
                <h3>Vitamina C 1000mg</h3>
                <div class="tabs">
                    <button class="tab active" onclick="openTab(event, 'descriptionVitC')">Descriere</button>
                    <button class="tab" onclick="openTab(event, 'sideEffectsVitC')">Efecte Secundare</button>
                </div>
                <div id="descriptionVitC" class="tab-content active">
                    <p>SusÈ›ine sistemul imunitar. 20 comprimate efervescente.</p>
                    <p>Cantitate Ã®n stoc: 100</p>
                    <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">29.99 Lei</p>
                </div>
                <div id="sideEffectsVitC" class="tab-content">
                    <p>Poate cauza: disconfort digestiv Ã®n doze mari.</p>
                </div>
                <button onclick="addToCart('Vitamina C 1000mg')">AdaugÄƒ Ã®n CoÈ™</button>
            </div>

            <!-- Antibiotice - Cu ReÈ›etÄƒ -->
            <div class="card product-card">
                <h3>Augmentin 1000mg</h3>
                <div class="tabs">
                    <button class="tab active" onclick="openTab(event, 'descriptionAugmentin')">Descriere</button>
                    <button class="tab" onclick="openTab(event, 'sideEffectsAugmentin')">Efecte Secundare</button>
                </div>
                <div id="descriptionAugmentin" class="tab-content active">
                    <p>Antibiotic cu spectru larg. 10 comprimate filmate.</p>
                    <p>Cantitate Ã®n stoc: 25</p>
                    <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">65.99 Lei</p>
                    <p><strong style="color: var(--primary-dark);">âš•ï¸ NecesitÄƒ ReÈ›etÄƒ</strong></p>
                </div>
                <div id="sideEffectsAugmentin" class="tab-content">
                    <p>Poate cauza: diaree, greaÈ›Äƒ, reacÈ›ii alergice.</p>
                </div>
                <button onclick="addToCart('Augmentin', true)">AdaugÄƒ Ã®n CoÈ™ (NecesitÄƒ ReÈ›etÄƒ)</button>
            </div>

            <!-- Antitermice - FÄƒrÄƒ ReÈ›etÄƒ -->
            <div class="card product-card">
                <h3>Paracetamol 500mg</h3>
                <div class="tabs">
                    <button class="tab active" onclick="openTab(event, 'descriptionParacetamol')">Descriere</button>
                    <button class="tab" onclick="openTab(event, 'sideEffectsParacetamol')">Efecte Secundare</button>
                </div>
                <div id="descriptionParacetamol" class="tab-content active">
                    <p>Antitermic È™i analgezic. 20 comprimate.</p>
                    <p>Cantitate Ã®n stoc: 150</p>
                    <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">15.99 Lei</p>
                </div>
                <div id="sideEffectsParacetamol" class="tab-content">
                    <p>Poate afecta ficatul Ã®n doze mari.</p>
                </div>
                <button onclick="addToCart('Paracetamol')">AdaugÄƒ Ã®n CoÈ™</button>
            </div>

            <!-- More products will be loaded dynamically -->
        </div>
    </main>

    <!-- Cart Hover Popup -->
    <div class="cart-popup" id="cartPopup" style="display: none; position: absolute; right: 20px; top: 80px; background: var(--background-color); border: 1px solid var(--border-color); padding: 1rem; border-radius: 8px; box-shadow: var(--shadow); min-width: 300px; z-index: 1000;">
        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">CoÈ™ul meu</h3>
        <div id="cartItems" style="max-height: 300px; overflow-y: auto;">
            <!-- Cart items will be displayed here -->
        </div>
        <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
            <p style="display: flex; justify-content: space-between;">
                <span>Total:</span>
                <span id="cartTotal" style="font-weight: bold; color: var(--primary-color)">0.00 Lei</span>
            </p>
        </div>
    </div>

    <!-- Popup ÃncÄƒrcare ReÈ›etÄƒ -->
    <div class="overlay" id="overlay"></div>
    <div class="prescription-popup card" id="prescriptionPopup">
        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">ÃncÄƒrcare ReÈ›etÄƒ</h3>
        <p style="margin-bottom: 1rem;">VÄƒ rugÄƒm sÄƒ Ã®ncÄƒrcaÈ›i o reÈ›etÄƒ validÄƒ de la medicul dumneavoastrÄƒ</p>
        <p style="margin-bottom: 1rem; font-size: 0.9em; color: #666;">Formate acceptate: PDF, JPG, PNG</p>
        <input type="file" accept=".pdf,.jpg,.png" style="margin-bottom: 1rem;">
        <div style="margin-bottom: 1rem;">
            <p style="font-size: 0.9em; color: #666;">ReÈ›eta trebuie sÄƒ fie:</p>
            <ul style="font-size: 0.9em; color: #666; margin-left: 1.5rem;">
                <li>LizibilÄƒ</li>
                <li>SemnatÄƒ È™i È™tampilatÄƒ de medic</li>
                <li>Cu data emiterii vizibilÄƒ</li>
                <li>Cu numele pacientului vizibil</li>
            </ul>
        </div>
        <div style="display: flex; gap: 1rem;">
            <button onclick="uploadPrescription()">Trimite ReÈ›eta</button>
            <button onclick="closePrescriptionPopup()" style="background-color: #9e9e9e;">AnuleazÄƒ</button>
        </div>
    </div>

    <script>
        let cart = [];
        let products = [];
        let cartCount = 0;

        // Load all products when page loads
        window.onload = function() {
            loadAllProducts();
            const cartIcon = document.querySelector('.basket-icon');
            const cartPopup = document.getElementById('cartPopup');
            
            cartIcon.addEventListener('mouseenter', () => {
                cartPopup.style.display = 'block';
                updateCartDisplay();
            });

            cartIcon.addEventListener('mouseleave', (e) => {
                const rect = cartPopup.getBoundingClientRect();
                if (
                    e.clientX < rect.left ||
                    e.clientX > rect.right ||
                    e.clientY < rect.top ||
                    e.clientY > rect.bottom
                ) {
                    cartPopup.style.display = 'none';
                }
            });

            cartPopup.addEventListener('mouseleave', () => {
                cartPopup.style.display = 'none';
            });
        }

        function loadAllProducts() {
            products = [
                { 
                    name: 'Theraflu Extra Grip',
                    price: 35.99,
                    category: 'cold',
                    prescription: false,
                    description: 'Pulbere pentru soluÈ›ie oralÄƒ. Tratamentul simptomatic al rÄƒcelii È™i gripei.',
                    sideEffects: 'Poate cauza: nervozitate, insomnie, ameÈ›eli.',
                    stock: 45
                },
                { 
                    name: 'Parasinus',
                    price: 28.99,
                    category: 'cold',
                    prescription: false,
                    description: 'Pentru congestie nazalÄƒ È™i dureri sinusale. 12 comprimate.',
                    sideEffects: 'Poate cauza: somnolenÈ›Äƒ, uscÄƒciunea gurii.',
                    stock: 60
                },
                {
                    name: 'Strepsils Intensiv Miere & LÄƒmÃ¢ie',
                    price: 25.99,
                    category: 'throat',
                    prescription: false,
                    description: 'Pastile pentru dureri Ã®n gÃ¢t. 24 pastile.',
                    sideEffects: 'Poate cauza: iritaÈ›ie localÄƒ uÈ™oarÄƒ.',
                    stock: 80
                },
                {
                    name: 'ACC 600mg',
                    price: 32.99,
                    category: 'cough',
                    prescription: false,
                    description: 'Expectorant pentru tuse productivÄƒ. 10 plicuri efervescente.',
                    sideEffects: 'Poate cauza: greaÈ›Äƒ, tulburÄƒri digestive.',
                    stock: 40
                },
                {
                    name: 'Vitamina C 1000mg',
                    price: 29.99,
                    category: 'vitamins',
                    prescription: false,
                    description: 'SusÈ›ine sistemul imunitar. 20 comprimate efervescente.',
                    sideEffects: 'Poate cauza: disconfort digestiv Ã®n doze mari.',
                    stock: 100
                },
                {
                    name: 'Augmentin 1000mg',
                    price: 65.99,
                    category: 'antibiotics',
                    prescription: true,
                    description: 'Antibiotic cu spectru larg. 10 comprimate filmate.',
                    sideEffects: 'Poate cauza: diaree, greaÈ›Äƒ, reacÈ›ii alergice.',
                    stock: 25
                },
                {
                    name: 'Paracetamol 500mg',
                    price: 15.99,
                    category: 'painkillers',
                    prescription: false,
                    description: 'Antitermic È™i analgezic. 20 comprimate.',
                    sideEffects: 'Poate afecta ficatul Ã®n doze mari.',
                    stock: 150
                },
                {
                    name: 'Ibuprofen 400mg',
                    price: 18.99,
                    category: 'painkillers',
                    prescription: false,
                    description: 'Antiinflamator nesteroidian pentru durere È™i febrÄƒ. 30 comprimate filmate.',
                    sideEffects: 'Poate cauza: dureri de stomac, greaÈ›Äƒ, risc crescut de sÃ¢ngerare.',
                    stock: 120
                },
                {
                    name: 'Nurofen RÄƒcealÄƒ È™i GripÄƒ',
                    price: 32.99,
                    category: 'cold',
                    prescription: false,
                    description: 'Tratamentul simptomatic al rÄƒcelii È™i gripei. 24 comprimate filmate.',
                    sideEffects: 'Poate cauza: somnolenÈ›Äƒ, ameÈ›eli, dureri de stomac.',
                    stock: 85
                },
                {
                    name: 'Aspenter 75mg',
                    price: 22.99,
                    category: 'heart',
                    prescription: true,
                    description: 'Antiagregant plachetar. 30 comprimate gastrorezistente.',
                    sideEffects: 'Poate cauza: sÃ¢ngerÄƒri, vÃ¢nÄƒtÄƒi, dureri de stomac.',
                    stock: 60
                },
                {
                    name: 'Omeprazol 20mg',
                    price: 25.99,
                    category: 'digestive',
                    prescription: true,
                    description: 'Pentru reflux gastroesofagian È™i ulcer. 14 capsule.',
                    sideEffects: 'Poate cauza: dureri de cap, diaree, greaÈ›Äƒ.',
                    stock: 45
                },
                {
                    name: 'Claritine 10mg',
                    price: 28.99,
                    category: 'allergy',
                    prescription: false,
                    description: 'Antihistaminic pentru alergii. 10 comprimate.',
                    sideEffects: 'Poate cauza: somnolenÈ›Äƒ, gurÄƒ uscatÄƒ.',
                    stock: 70
                },
                {
                    name: 'Ventolin 100mcg',
                    price: 45.99,
                    category: 'respiratory',
                    prescription: true,
                    description: 'Bronhodilatator pentru astm. Inhaler 200 doze.',
                    sideEffects: 'Poate cauza: tremurÄƒturi, palpitaÈ›ii, crampe musculare.',
                    stock: 30
                },
                {
                    name: 'Magneziu + B6',
                    price: 19.99,
                    category: 'supplements',
                    prescription: false,
                    description: 'Supliment pentru sistem nervos È™i muscular. 50 comprimate.',
                    sideEffects: 'Poate cauza: efecte laxative Ã®n doze mari.',
                    stock: 90
                },
                {
                    name: 'Espumisan 40mg',
                    price: 21.99,
                    category: 'digestive',
                    prescription: false,
                    description: 'Pentru balonare È™i gaze intestinale. 50 capsule moi.',
                    sideEffects: 'Nu au fost raportate efecte secundare semnificative.',
                    stock: 75
                }
            ];
            renderProducts(products);
        }

        function showPrescriptionPopup() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('prescriptionPopup').style.display = 'block';
        }

        function closePrescriptionPopup() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('prescriptionPopup').style.display = 'none';
        }

        function uploadPrescription() {
            alert('ReÈ›eta a fost Ã®ncÄƒrcatÄƒ cu succes! Va fi verificatÄƒ de personalul nostru.');
            closePrescriptionPopup();
        }

        function openTab(evt, tabName) {
            let tabcontents = evt.target.parentElement.parentElement.getElementsByClassName("tab-content");
            for (let tabcontent of tabcontents) {
                tabcontent.classList.remove("active");
            }
            let tabs = evt.target.parentElement.getElementsByClassName("tab");
            for (let tab of tabs) {
                tab.classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");
            evt.target.classList.add("active");
        }

        function addToCart(itemName) {
            cartCount++;
            document.getElementById('cart-count').textContent = cartCount;
            const toast = document.createElement('div');
            toast.style.position = 'fixed';
            toast.style.bottom = '20px';
            toast.style.right = '20px';
            toast.style.backgroundColor = 'var(--primary-color)';
            toast.style.color = 'white';
            toast.style.padding = '1rem';
            toast.style.borderRadius = '8px';
            toast.style.boxShadow = 'var(--shadow)';
            toast.style.transition = 'opacity 0.3s ease';
            toast.textContent = `${itemName} a fost adÄƒugat Ã®n coÈ™!`;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 2000);
        }

        function showBasket() {
            alert('FuncÈ›ionalitatea coÈ™ului va fi implementatÄƒ Ã®n curÃ¢nd!');
        }

        function updatePriceValue(value) {
            document.getElementById('priceValue').textContent = value + ' Lei';
        }

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const prescriptionFilter = document.querySelector('select:nth-of-type(2)').value;
            const maxPrice = parseFloat(document.querySelector('input[type="range"]').value);

            const filtered = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm);
                const matchesCategory = category === 'all' || product.category === category;
                const matchesPrescription = prescriptionFilter === 'all' || 
                    (prescriptionFilter === 'yes' && product.prescription) ||
                    (prescriptionFilter === 'no' && !product.prescription);
                const matchesPrice = product.price <= maxPrice;

                return matchesSearch && matchesCategory && matchesPrescription && matchesPrice;
            });

            renderProducts(filtered);
        }

        function renderProducts(productsToShow) {
            const grid = document.querySelector('.product-grid');
            grid.innerHTML = '';

            productsToShow.forEach(product => {
                const card = document.createElement('div');
                card.className = 'card product-card';
                card.innerHTML = `
                    <h3>${product.name}</h3>
                    <div class="tabs">
                        <button class="tab active" onclick="openTab(event, 'description${product.name.replace(/\s+/g, '')}')">Descriere</button>
                        <button class="tab" onclick="openTab(event, 'sideEffects${product.name.replace(/\s+/g, '')}')">Efecte Secundare</button>
                    </div>
                    <div id="description${product.name.replace(/\s+/g, '')}" class="tab-content active">
                        <p>${product.description}</p>
                        <p>Cantitate Ã®n stoc: ${product.stock}</p>
                        <p style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">${product.price} Lei</p>
                        ${product.prescription ? '<p><strong style="color: var(--primary-dark);">âš•ï¸ NecesitÄƒ ReÈ›etÄƒ</strong></p>' : ''}
                    </div>
                    <div id="sideEffects${product.name.replace(/\s+/g, '')}" class="tab-content">
                        <p>${product.sideEffects}</p>
                    </div>
                    <button onclick="addToCart('${product.name}', ${product.prescription})">${product.prescription ? 'AdaugÄƒ Ã®n CoÈ™ (NecesitÄƒ ReÈ›etÄƒ)' : 'AdaugÄƒ Ã®n CoÈ™'}</button>
                `;
                grid.appendChild(card);
            });
        }

        function addToCart(itemName, requiresPrescription = false) {
            const product = products.find(p => p.name === itemName);
            if (!product) return;

            if (requiresPrescription) {
                showPrescriptionPopup();
                return;
            }

            cart.push({
                name: product.name,
                price: product.price
            });
            
            cartCount++;
            document.getElementById('cart-count').textContent = cartCount;
            updateCartDisplay();

            // Show toast notification
            const toast = document.createElement('div');
            toast.style.position = 'fixed';
            toast.style.bottom = '20px';
            toast.style.right = '20px';
            toast.style.backgroundColor = 'var(--primary-color)';
            toast.style.color = 'white';
            toast.style.padding = '1rem';
            toast.style.borderRadius = '8px';
            toast.style.boxShadow = 'var(--shadow)';
            toast.style.transition = 'opacity 0.3s ease';
            toast.style.zIndex = '1000';
            toast.textContent = `${itemName} a fost adÄƒugat Ã®n coÈ™!`;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 2000);
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            cartItems.innerHTML = '';
            let total = 0;

            cart.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.style.display = 'flex';
                itemElement.style.justifyContent = 'space-between';
                itemElement.style.alignItems = 'center';
                itemElement.style.padding = '0.5rem 0';
                itemElement.style.borderBottom = '1px solid var(--border-color)';
                
                itemElement.innerHTML = `
                    <span>${item.name}</span>
                    <div>
                        <span style="margin-right: 1rem">${item.price} Lei</span>
                        <button onclick="removeFromCart(${index})" style="color: var(--error-color); background: none; border: none; cursor: pointer;">Ã—</button>
                    </div>
                `;
                cartItems.appendChild(itemElement);
                total += item.price;
            });

            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="text-align: center; color: var(--text-color-light);">CoÈ™ul este gol</p>';
            }

            cartTotal.textContent = total.toFixed(2) + ' Lei';
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            cartCount--;
            document.getElementById('cart-count').textContent = cartCount;
            updateCartDisplay();
        }

        function showBasket() {
            const cartPopup = document.getElementById('cartPopup');
            cartPopup.style.display = cartPopup.style.display === 'none' ? 'block' : 'none';
            updateCartDisplay();
        }

    </script>
    <script>
        // Theme management
        function setTheme(isDark) {
            document.body.setAttribute('data-theme', isDark ? 'dark' : 'light');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            if (isDark) {
                themeIcon.textContent = 'â˜€ï¸';
                themeText.textContent = 'Mod Luminos';
            } else {
                themeIcon.textContent = 'ğŸŒ™';
                themeText.textContent = 'Mod Ãntunecat';
            }

            // Update CSS variables for theme
            if (isDark) {
                document.documentElement.style.setProperty('--background-color', '#1a1a1a');
                document.documentElement.style.setProperty('--text-color', '#ffffff');
                document.documentElement.style.setProperty('--card-color', '#2d2d2d');
                document.documentElement.style.setProperty('--border-color', '#404040');
                document.documentElement.style.setProperty('--primary-color', '#4CAF50');
                document.documentElement.style.setProperty('--primary-dark', '#388E3C');
                document.documentElement.style.setProperty('--error-color', '#f44336');
                document.documentElement.style.setProperty('--text-color-light', '#9e9e9e');
                document.documentElement.style.setProperty('--shadow', '0 2px 8px rgba(0, 0, 0, 0.3)');
            } else {
                document.documentElement.style.setProperty('--background-color', '#ffffff');
                document.documentElement.style.setProperty('--text-color', '#333333');
                document.documentElement.style.setProperty('--card-color', '#ffffff');
                document.documentElement.style.setProperty('--border-color', '#e0e0e0');
                document.documentElement.style.setProperty('--primary-color', '#4CAF50');
                document.documentElement.style.setProperty('--primary-dark', '#388E3C');
                document.documentElement.style.setProperty('--error-color', '#f44336');
                document.documentElement.style.setProperty('--text-color-light', '#757575');
                document.documentElement.style.setProperty('--shadow', '0 2px 8px rgba(0, 0, 0, 0.1)');
            }
        }

        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme');
            setTheme(currentTheme !== 'dark');
        }

        // Check for saved theme preference or system preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            setTheme(savedTheme === 'dark');
        } else {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            setTheme(prefersDark);
        }

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (!localStorage.getItem('theme')) {
                setTheme(e.matches);
            }
        });
    </script>
</body>
</html>